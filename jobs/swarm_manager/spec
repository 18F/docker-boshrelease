---
name: swarm_manager

packages:
  - bosh-helpers
  - swarm

templates:
  bin/job_properties.sh.erb: bin/job_properties.sh
  bin/swarm_manager_ctl: bin/swarm_manager_ctl
  config/docker.cacert.erb: config/docker.cacert
  config/docker.cert.erb: config/docker.cert
  config/docker.key.erb: config/docker.key

properties:
  swarm_manager.debug:
    description: "Enable debug mode"
    default: false
  swarm_manager.log_level:
    description: "Log level (options: debug, info, warn, error, fatal, panic)"
    default: "info"
  swarm_manager.listen_address:
    description: "Listen address"
    default: "0.0.0.0"
  swarm_manager.port:
    description: "Listen port"
    default: "2375"
  swarm_manager.strategy:
    description: "Placement strategy to use [spread, binpack, random]"
    default: "spread"
  swarm_manager.filters:
    description: "Filters to use [health, port, dependency, affinity, constraint]"
    default: ["health", "port", "dependency", "affinity", "constraint"]
  swarm_manager.heartbeat:
    description: "Time in second between each heartbeat"
    default: "20s"
  swarm_manager.api_enable_cors:
    description: "Enable CORS headers in the remote API"
    default: false
  swarm_manager.overcommit:
    description: "Overcommit to apply on resources"
    default: "0.5"
  swarm_manager.docker_nodes:
    description: "Array of Docker nodes"
    default: []

  docker.tcp_port:
    description: "TCP port where Docker daemon will listen to (if not set, TCP will not be available)"
    default: "4243"
  docker.tls:
    description: "Use TLS"
    default: false
  docker.tls_cacert:
    description: "Trust only remotes providing a certificate signed by the CA given here"
  docker.tls_cert:
    description: "TLS certificate file"
  docker.tls_key:
    description: "TLS key file"
  docker.tls_verify:
    description: "Use TLS and verify the remote"
    default: false
